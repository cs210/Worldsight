{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/aakankshasaxena/Documents/Junior/Meshworks/Worldsight/meshworks/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { HAS_WEBXR_DEVICE_API, HAS_WEBXR_HIT_TEST_API, IS_WEBXR_AR_CANDIDATE } from './constants.js';\nexport var deserializeUrl = function deserializeUrl(url) {\n  return url != null && url !== 'null' ? toFullUrl(url) : null;\n};\nexport var assertIsArCandidate = function assertIsArCandidate() {\n  if (IS_WEBXR_AR_CANDIDATE) {\n    return;\n  }\n\n  var missingApis = [];\n\n  if (!HAS_WEBXR_DEVICE_API) {\n    missingApis.push('WebXR Device API');\n  }\n\n  if (!HAS_WEBXR_HIT_TEST_API) {\n    missingApis.push('WebXR Hit Test API');\n  }\n\n  throw new Error(\"The following APIs are required for AR, but are missing in this browser: \".concat(missingApis.join(', ')));\n};\n/**\n * Converts a partial URL string to a fully qualified URL string.\n *\n * @param {String} url\n * @return {String}\n */\n\nexport var toFullUrl = function toFullUrl(partialUrl) {\n  var url = new URL(partialUrl, window.location.toString());\n  return url.toString();\n};\n/**\n * Returns a throttled version of a given function that is only invoked at most\n * once within a given threshold of time in milliseconds.\n *\n * The throttled version of the function has a \"flush\" property that resets the\n * threshold for cases when immediate invokation is desired.\n */\n\nexport var throttle = function throttle(fn, ms) {\n  var timer = null;\n\n  var throttled = function throttled() {\n    if (timer != null) {\n      return;\n    }\n\n    fn.apply(void 0, arguments);\n    timer = self.setTimeout(function () {\n      return timer = null;\n    }, ms);\n  };\n\n  throttled.flush = function () {\n    if (timer != null) {\n      self.clearTimeout(timer);\n      timer = null;\n    }\n  };\n\n  return throttled;\n};\nexport var debounce = function debounce(fn, ms) {\n  var timer = null;\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (timer != null) {\n      self.clearTimeout(timer);\n    }\n\n    timer = self.setTimeout(function () {\n      timer = null;\n      fn.apply(void 0, args);\n    }, ms);\n  };\n};\n/**\n * @param {Number} edge\n * @param {Number} value\n * @return {Number} 0 if value is less than edge, otherwise 1\n */\n\nexport var step = function step(edge, value) {\n  return value < edge ? 0 : 1;\n};\n/**\n * @param {Number} value\n * @param {Number} lowerLimit\n * @param {Number} upperLimit\n * @return {Number} value clamped within lowerLimit..upperLimit\n */\n\nexport var clamp = function clamp(value, lowerLimit, upperLimit) {\n  return Math.max(lowerLimit, Math.min(upperLimit, value));\n}; // The DPR we use for a \"capped\" scenario (see resolveDpr below):\n\nexport var CAPPED_DEVICE_PIXEL_RATIO = 1;\n/**\n * This helper analyzes the layout of the current page to decide if we should\n * use the natural device pixel ratio, or a capped value.\n *\n * We cap DPR if there is no meta viewport (suggesting that user is not\n * consciously specifying how to scale the viewport relative to the device\n * screen size).\n *\n * The rationale is that this condition typically leads to a pathological\n * outcome on mobile devices. When the window dimensions are scaled up on a\n * device with a high DPR, we create a canvas that is much larger than\n * appropriate to accomodate for the pixel density if we naively use the\n * reported DPR.\n *\n * This value needs to be measured in real time, as device pixel ratio can\n * change over time (e.g., when a user zooms the page). Also, in some cases\n * (such as Firefox on Android), the window's innerWidth is initially reported\n * as the same as the screen's availWidth but changes later.\n *\n * A user who specifies a meta viewport, thereby consciously creating scaling\n * conditions where <model-viewer> is slow, will be encouraged to live their\n * best life.\n */\n\nexport var resolveDpr = function () {\n  // If true, implies that the user is conscious of the viewport scaling\n  // relative to the device screen size.\n  var HAS_META_VIEWPORT_TAG = function () {\n    var metas = document.head != null ? Array.from(document.head.querySelectorAll('meta')) : [];\n\n    var _iterator = _createForOfIteratorHelper(metas),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var meta = _step.value;\n\n        if (meta.name === 'viewport') {\n          return true;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return false;\n  }();\n\n  if (!HAS_META_VIEWPORT_TAG) {\n    console.warn('No <meta name=\"viewport\"> detected; <model-viewer> will cap pixel density at 1.');\n  }\n\n  return function () {\n    return HAS_META_VIEWPORT_TAG ? window.devicePixelRatio : CAPPED_DEVICE_PIXEL_RATIO;\n  };\n}();\n/**\n * Debug mode is enabled when one of the two following conditions is true:\n *\n *  1. A 'model-viewer-debug-mode' query parameter is present in the current\n *     search string\n *  2. There is a global object ModelViewerElement with a debugMode property set\n *     to true\n */\n\nexport var isDebugMode = function () {\n  var debugQueryParameterName = 'model-viewer-debug-mode';\n  var debugQueryParameter = new RegExp(\"[?&]\".concat(debugQueryParameterName, \"(&|$)\"));\n  return function () {\n    return self.ModelViewerElement && self.ModelViewerElement.debugMode || self.location && self.location.search && self.location.search.match(debugQueryParameter);\n  };\n}();\n/**\n * Returns the first key in a Map in iteration order.\n *\n * NOTE(cdata): This is necessary because IE11 does not implement iterator\n * methods of Map, and polymer-build does not polyfill these methods for\n * compatibility and performance reasons. This helper proposes that it is\n * a reasonable compromise to sacrifice a very small amount of runtime\n * performance in IE11 for the sake of code clarity.\n */\n\nexport var getFirstMapKey = function getFirstMapKey(map) {\n  if (map.keys != null) {\n    return map.keys().next().value || null;\n  }\n\n  var firstKey = null;\n\n  try {\n    map.forEach(function (_value, key, _map) {\n      firstKey = key; // Stop iterating the Map with forEach:\n\n      throw new Error();\n    });\n  } catch (_error) {}\n\n  return firstKey;\n};","map":{"version":3,"sources":["../src/utilities.ts"],"names":[],"mappings":"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","sourcesContent":["/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {HAS_WEBXR_DEVICE_API, HAS_WEBXR_HIT_TEST_API, IS_WEBXR_AR_CANDIDATE} from './constants.js';\n\nexport type Constructor<T = object, U = object> = {\n  new (...args: any[]): T,\n  prototype: T\n}&U;\n\nexport const deserializeUrl = (url: string|null): string|null =>\n    (url != null && url !== 'null') ? toFullUrl(url) : null;\n\n\nexport const assertIsArCandidate = () => {\n  if (IS_WEBXR_AR_CANDIDATE) {\n    return;\n  }\n\n  const missingApis = [];\n\n  if (!HAS_WEBXR_DEVICE_API) {\n    missingApis.push('WebXR Device API');\n  }\n\n  if (!HAS_WEBXR_HIT_TEST_API) {\n    missingApis.push('WebXR Hit Test API');\n  }\n\n  throw new Error(\n      `The following APIs are required for AR, but are missing in this browser: ${\n          missingApis.join(', ')}`);\n};\n\n\n/**\n * Converts a partial URL string to a fully qualified URL string.\n *\n * @param {String} url\n * @return {String}\n */\nexport const toFullUrl = (partialUrl: string): string => {\n  const url = new URL(partialUrl, window.location.toString());\n  return url.toString();\n};\n\n\n/**\n * Returns a throttled version of a given function that is only invoked at most\n * once within a given threshold of time in milliseconds.\n *\n * The throttled version of the function has a \"flush\" property that resets the\n * threshold for cases when immediate invokation is desired.\n */\nexport const throttle = (fn: (...args: Array<any>) => any, ms: number) => {\n  let timer: number|null = null;\n\n  const throttled = (...args: Array<any>) => {\n    if (timer != null) {\n      return;\n    }\n\n    fn(...args);\n\n    timer = self.setTimeout(() => timer = null, ms);\n  };\n\n  throttled.flush = () => {\n    if (timer != null) {\n      self.clearTimeout(timer);\n      timer = null;\n    }\n  };\n\n  return throttled;\n};\n\nexport const debounce = (fn: (...args: Array<any>) => any, ms: number) => {\n  let timer: number|null = null;\n\n  return (...args: Array<any>) => {\n    if (timer != null) {\n      self.clearTimeout(timer);\n    }\n\n    timer = self.setTimeout(() => {\n      timer = null;\n      fn(...args);\n    }, ms);\n  };\n};\n\n\n/**\n * @param {Number} edge\n * @param {Number} value\n * @return {Number} 0 if value is less than edge, otherwise 1\n */\nexport const step = (edge: number, value: number): number => {\n  return value < edge ? 0 : 1;\n};\n\n\n/**\n * @param {Number} value\n * @param {Number} lowerLimit\n * @param {Number} upperLimit\n * @return {Number} value clamped within lowerLimit..upperLimit\n */\nexport const clamp =\n    (value: number, lowerLimit: number, upperLimit: number): number =>\n        Math.max(lowerLimit, Math.min(upperLimit, value));\n\n\n// The DPR we use for a \"capped\" scenario (see resolveDpr below):\nexport const CAPPED_DEVICE_PIXEL_RATIO = 1;\n\n\n/**\n * This helper analyzes the layout of the current page to decide if we should\n * use the natural device pixel ratio, or a capped value.\n *\n * We cap DPR if there is no meta viewport (suggesting that user is not\n * consciously specifying how to scale the viewport relative to the device\n * screen size).\n *\n * The rationale is that this condition typically leads to a pathological\n * outcome on mobile devices. When the window dimensions are scaled up on a\n * device with a high DPR, we create a canvas that is much larger than\n * appropriate to accomodate for the pixel density if we naively use the\n * reported DPR.\n *\n * This value needs to be measured in real time, as device pixel ratio can\n * change over time (e.g., when a user zooms the page). Also, in some cases\n * (such as Firefox on Android), the window's innerWidth is initially reported\n * as the same as the screen's availWidth but changes later.\n *\n * A user who specifies a meta viewport, thereby consciously creating scaling\n * conditions where <model-viewer> is slow, will be encouraged to live their\n * best life.\n */\nexport const resolveDpr: () => number = (() => {\n  // If true, implies that the user is conscious of the viewport scaling\n  // relative to the device screen size.\n  const HAS_META_VIEWPORT_TAG = (() => {\n    const metas = document.head != null ?\n        Array.from(document.head.querySelectorAll('meta')) :\n        [];\n\n    for (const meta of metas) {\n      if (meta.name === 'viewport') {\n        return true;\n      }\n    }\n\n    return false;\n  })();\n\n  if (!HAS_META_VIEWPORT_TAG) {\n    console.warn(\n        'No <meta name=\"viewport\"> detected; <model-viewer> will cap pixel density at 1.');\n  }\n\n  return () => HAS_META_VIEWPORT_TAG ? window.devicePixelRatio :\n                                       CAPPED_DEVICE_PIXEL_RATIO;\n})();\n\n\n/**\n * Debug mode is enabled when one of the two following conditions is true:\n *\n *  1. A 'model-viewer-debug-mode' query parameter is present in the current\n *     search string\n *  2. There is a global object ModelViewerElement with a debugMode property set\n *     to true\n */\nexport const isDebugMode = (() => {\n  const debugQueryParameterName = 'model-viewer-debug-mode';\n  const debugQueryParameter =\n      new RegExp(`[\\?&]${debugQueryParameterName}(&|$)`);\n\n  return () => ((self as any).ModelViewerElement &&\n                (self as any).ModelViewerElement.debugMode) ||\n      (self.location && self.location.search &&\n       self.location.search.match(debugQueryParameter));\n})();\n\n\n/**\n * Returns the first key in a Map in iteration order.\n *\n * NOTE(cdata): This is necessary because IE11 does not implement iterator\n * methods of Map, and polymer-build does not polyfill these methods for\n * compatibility and performance reasons. This helper proposes that it is\n * a reasonable compromise to sacrifice a very small amount of runtime\n * performance in IE11 for the sake of code clarity.\n */\nexport const getFirstMapKey = <T = any, U = any>(map: Map<T, U>): T|null => {\n  if (map.keys != null) {\n    return map.keys().next().value || null;\n  }\n\n  let firstKey: T|null = null;\n\n  try {\n    map.forEach((_value: U, key: T, _map: Map<T, U>) => {\n      firstKey = key;\n      // Stop iterating the Map with forEach:\n      throw new Error();\n    });\n  } catch (_error) {\n  }\n\n  return firstKey;\n};\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}